ST558-651 Project 1
================

``` r
#let's look at all franchises via franchise totals
data <- get_nhl_data('Franchise Totals')

#let's look at active franchises first
#and pivot wider so that playoffs and reg season 
#are on the same line of data
franchises <- data %>% filter(activeFranchise == 1) %>%
                mutate(game_type = if_else(gameTypeId == 2, 
                                           'regular', 'playoff')) %>%
                select(franchiseId, teamName, gamesPlayed, 
                       wins, losses, game_type) %>%
                pivot_wider(names_from = game_type, values_from = 
                              c(gamesPlayed, wins, losses))


franchises$win_pct_playoff <- franchises$wins_playoff / 
                        (franchises$wins_playoff + franchises$losses_playoff)

p <- ggplot(data=franchises, aes(x=gamesPlayed_regular, y=win_pct_playoff)) +
      geom_point(aes(name=teamName))
```

    ## Warning: Ignoring unknown aesthetics: name

``` r
ggplotly(p)
```

<div id="htmlwidget-cc606938c60d574deab4" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-cc606938c60d574deab4">{"x":{"data":[{"x":[2993,3788,6560,4171,4171,6626,3945,6787,2195,6516,902,1812,2109,2194,3633,6560,6293,1731,4173,3154,1978,3235,3945,2111,2109,4172,1360,2274,1568,1567,2062,1256,1338,1420,480,176,636,160,92,749,536,291,40,230],"y":[0.533073929961089,0.551948051948052,0.47843137254902,0.514476614699332,0.534526854219949,0.496263079222721,0.484375,0.579842931937173,0.47682119205298,0.477859778597786,0,0.517857142857143,0.388888888888889,0.571428571428571,0.469387755102041,0.493554327808471,0.52588996763754,0.446280991735537,0.451612903225806,0.46606334841629,0.568807339449541,0.588235294117647,0.451219512195122,0.549382716049383,0.525,0.435294117647059,0.385964912280702,0.493775933609959,0.365853658536585,0.357142857142857,0.481927710843373,0.4375,0.306451612903226,0.36734693877551,0,0,0.117647058823529,null,0,0.41025641025641,0.444444444444444,0.596774193548387,0.571428571428571,0.4],"text":["gamesPlayed_regular: 2993<br />win_pct_playoff: 0.5330739<br />teamName: New Jersey Devils","gamesPlayed_regular: 3788<br />win_pct_playoff: 0.5519481<br />teamName: New York Islanders","gamesPlayed_regular: 6560<br />win_pct_playoff: 0.4784314<br />teamName: New York Rangers","gamesPlayed_regular: 4171<br />win_pct_playoff: 0.5144766<br />teamName: Philadelphia Flyers","gamesPlayed_regular: 4171<br />win_pct_playoff: 0.5345269<br />teamName: Pittsburgh Penguins","gamesPlayed_regular: 6626<br />win_pct_playoff: 0.4962631<br />teamName: Boston Bruins","gamesPlayed_regular: 3945<br />win_pct_playoff: 0.4843750<br />teamName: Buffalo Sabres","gamesPlayed_regular: 6787<br />win_pct_playoff: 0.5798429<br />teamName: Montr√©al Canadiens","gamesPlayed_regular: 2195<br />win_pct_playoff: 0.4768212<br />teamName: Ottawa Senators","gamesPlayed_regular: 6516<br />win_pct_playoff: 0.4778598<br />teamName: Toronto Maple Leafs","gamesPlayed_regular:  902<br />win_pct_playoff: 0.0000000<br />teamName: Atlanta Thrashers","gamesPlayed_regular: 1812<br />win_pct_playoff: 0.5178571<br />teamName: Carolina Hurricanes","gamesPlayed_regular: 2109<br />win_pct_playoff: 0.3888889<br />teamName: Florida Panthers","gamesPlayed_regular: 2194<br />win_pct_playoff: 0.5714286<br />teamName: Tampa Bay Lightning","gamesPlayed_regular: 3633<br />win_pct_playoff: 0.4693878<br />teamName: Washington Capitals","gamesPlayed_regular: 6560<br />win_pct_playoff: 0.4935543<br />teamName: Chicago Blackhawks","gamesPlayed_regular: 6293<br />win_pct_playoff: 0.5258900<br />teamName: Detroit Red Wings","gamesPlayed_regular: 1731<br />win_pct_playoff: 0.4462810<br />teamName: Nashville Predators","gamesPlayed_regular: 4173<br />win_pct_playoff: 0.4516129<br />teamName: St. Louis Blues","gamesPlayed_regular: 3154<br />win_pct_playoff: 0.4660633<br />teamName: Calgary Flames","gamesPlayed_regular: 1978<br />win_pct_playoff: 0.5688073<br />teamName: Colorado Avalanche","gamesPlayed_regular: 3235<br />win_pct_playoff: 0.5882353<br />teamName: Edmonton Oilers","gamesPlayed_regular: 3945<br />win_pct_playoff: 0.4512195<br />teamName: Vancouver Canucks","gamesPlayed_regular: 2111<br />win_pct_playoff: 0.5493827<br />teamName: Anaheim Ducks","gamesPlayed_regular: 2109<br />win_pct_playoff: 0.5250000<br />teamName: Dallas Stars","gamesPlayed_regular: 4172<br />win_pct_playoff: 0.4352941<br />teamName: Los Angeles Kings","gamesPlayed_regular: 1360<br />win_pct_playoff: 0.3859649<br />teamName: Phoenix Coyotes","gamesPlayed_regular: 2274<br />win_pct_playoff: 0.4937759<br />teamName: San Jose Sharks","gamesPlayed_regular: 1568<br />win_pct_playoff: 0.3658537<br />teamName: Columbus Blue Jackets","gamesPlayed_regular: 1567<br />win_pct_playoff: 0.3571429<br />teamName: Minnesota Wild","gamesPlayed_regular: 2062<br />win_pct_playoff: 0.4819277<br />teamName: Minnesota North Stars","gamesPlayed_regular: 1256<br />win_pct_playoff: 0.4375000<br />teamName: Quebec Nordiques","gamesPlayed_regular: 1338<br />win_pct_playoff: 0.3064516<br />teamName: Winnipeg Jets (1979)","gamesPlayed_regular: 1420<br />win_pct_playoff: 0.3673469<br />teamName: Hartford Whalers","gamesPlayed_regular:  480<br />win_pct_playoff: 0.0000000<br />teamName: Colorado Rockies","gamesPlayed_regular:  176<br />win_pct_playoff: 0.0000000<br />teamName: Detroit Cougars","gamesPlayed_regular:  636<br />win_pct_playoff: 0.1176471<br />teamName: Atlanta Flames","gamesPlayed_regular:  160<br />win_pct_playoff:        NA<br />teamName: Kansas City Scouts","gamesPlayed_regular:   92<br />win_pct_playoff: 0.0000000<br />teamName: Detroit Falcons","gamesPlayed_regular:  749<br />win_pct_playoff: 0.4102564<br />teamName: Winnipeg Jets","gamesPlayed_regular:  536<br />win_pct_playoff: 0.4444444<br />teamName: Arizona Coyotes","gamesPlayed_regular:  291<br />win_pct_playoff: 0.5967742<br />teamName: Vegas Golden Knights","gamesPlayed_regular:   40<br />win_pct_playoff: 0.5714286<br />teamName: Toronto Arenas","gamesPlayed_regular:  230<br />win_pct_playoff: 0.4000000<br />teamName: Toronto St. Patricks"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,0,0,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)"}},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":26.2283105022831,"r":7.30593607305936,"b":40.1826484018265,"l":43.1050228310502},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-297.35,7124.35],"tickmode":"array","ticktext":["0","2000","4000","6000"],"tickvals":[0,2000,4000,6000],"categoryorder":"array","categoryarray":["0","2000","4000","6000"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"gamesPlayed_regular","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.0298387096774194,0.626612903225806],"tickmode":"array","ticktext":["0.0","0.2","0.4","0.6"],"tickvals":[0,0.2,0.4,0.6],"categoryorder":"array","categoryarray":["0.0","0.2","0.4","0.6"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"win_pct_playoff","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","showSendToCloud":false},"source":"A","attrs":{"2ea445956867":{"x":{},"y":{},"name":{},"type":"scatter"}},"cur_data":"2ea445956867","visdat":{"2ea445956867":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
